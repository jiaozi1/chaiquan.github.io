webpackJsonp([1],{"/n6Q":function(t,e,r){r("zQR9"),r("+tPU"),t.exports=r("Kh4W").f("iterator")},"06OY":function(t,e,r){var n=r("3Eo+")("meta"),o=r("EqjI"),i=r("D2L2"),a=r("evD5").f,s=0,u=Object.isExtensible||function(){return!0},l=!r("S82l")(function(){return u(Object.preventExtensions({}))}),c=function(t){a(t,n,{value:{i:"O"+ ++s,w:{}}})},f=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,n)){if(!u(t))return"F";if(!e)return"E";c(t)}return t[n].i},getWeak:function(t,e){if(!i(t,n)){if(!u(t))return!0;if(!e)return!1;c(t)}return t[n].w},onFreeze:function(t){return l&&f.NEED&&u(t)&&!i(t,n)&&c(t),t}}},"3IQO":function(t,e){},"5PlU":function(t,e,r){var n=r("RY/4"),o=r("dSzd")("iterator"),i=r("/bQp");t.exports=r("FeBl").isIterable=function(t){var e=Object(t);return void 0!==e[o]||"@@iterator"in e||i.hasOwnProperty(n(e))}},"5QVw":function(t,e,r){t.exports={default:r("BwfY"),__esModule:!0}},"7UMu":function(t,e,r){var n=r("R9M2");t.exports=Array.isArray||function(t){return"Array"==n(t)}},BO1k:function(t,e,r){t.exports={default:r("fxRn"),__esModule:!0}},BwfY:function(t,e,r){r("fWfb"),r("M6a0"),r("OYls"),r("QWe/"),t.exports=r("FeBl").Symbol},"D+qV":function(t,e){},EDno:function(t,e){},Kh4W:function(t,e,r){e.f=r("dSzd")},LKZe:function(t,e,r){var n=r("NpIQ"),o=r("X8DO"),i=r("TcQ7"),a=r("MmMw"),s=r("D2L2"),u=r("SfB7"),l=Object.getOwnPropertyDescriptor;e.f=r("+E39")?l:function(t,e){if(t=i(t),e=a(e,!0),u)try{return l(t,e)}catch(t){}if(s(t,e))return o(!n.f.call(t,e),t[e])}},OYls:function(t,e,r){r("crlp")("asyncIterator")},"QWe/":function(t,e,r){r("crlp")("observable")},Rrel:function(t,e,r){var n=r("TcQ7"),o=r("n0T6").f,i={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==i.call(t)?function(t){try{return o(t)}catch(t){return a.slice()}}(t):o(n(t))}},U2G7:function(t,e){},W3Iv:function(t,e,r){t.exports={default:r("wEtr"),__esModule:!0}},XSpx:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("W3Iv"),o=r.n(n),i=r("BO1k"),a=r.n(i),s=r("d7EF"),u=r.n(s),l=r("Dd8w"),c=r.n(l),f=r("RgdE"),d=r("qk/J"),m=r("NYxO"),p={name:"PermissionRecord",components:{MyPaginator:f.a},data:function(){return{auth_history:null,errTxt:null}},computed:c()({},Object(m.b)(["game_id"])),mounted:function(){this.query_history()},methods:{get_modified_auth_users:function(t){var e="/cgi-bin/report_judge/qq/get_modified_auth_users?",r={game_id:this.game_id,src_type:0,op_type:0,record_id:t},n=!0,i=!1,s=void 0;try{for(var l,c=a()(o()(r));!(n=(l=c.next()).done);n=!0){var f=l.value,d=u()(f,2);e+=d[0]+"="+d[1]+"&"}}catch(t){i=!0,s=t}finally{try{!n&&c.return&&c.return()}finally{if(i)throw s}}return e},query_history:function(){var t=this,e={game_id:this.game_id,src_type:0,op_type:0,start_time:0,end_time:0,offset:0,limit:0};Object(d.c)(e).then(function(e){0===e.ret?(t.auth_history=e.data.history,0===e.data.history.length&&(t.errTxt="暂无数据")):e.ret===t.$code.LOGINTIMEOUT?t.$loginOut():t.errTxt="数据请求失败，请尝试刷新页面，以重新获取数据"})}}},v={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"historyTable-box"},[r("table",{staticClass:"historyTable table",attrs:{cellspacing:"1"}},[t._m(0),t._v(" "),r("tbody",t._l(t.auth_history,function(e,n){return r("tr",{key:n},[r("td",[t._v(t._s(e.op_desc))]),t._v(" "),r("td",[t._v(t._s(e.record_time))]),t._v(" "),r("td",[t._v(t._s(e.op_user))]),r("td",[r("a",{staticClass:"btn-downRoll",attrs:{href:t.get_modified_auth_users(e.record_id)}},[t._v("下载名单")])])])}))]),t._v(" "),null!==t.errTxt?r("div",{staticClass:"getDataErr"},[t._v(t._s(t.errTxt))]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("权限操作内容")]),this._v(" "),e("th",[this._v("权限操作时间")]),this._v(" "),e("th",[this._v("权限操作人")]),this._v(" "),e("th",[this._v("操作下载名单")])])])}]};var _=r("VU/8")(p,v,!1,function(t){r("3IQO")},"data-v-21df822b",null).exports,h=r("mvHQ"),y=r.n(h),b=r("pFYg"),g=r.n(b),O=r("iJHC"),x=r("ZzzE"),w=r("22O3"),E=r("mw3O"),D=r.n(E),T={name:"PermissionSettings",components:{MyDialog:x.a},mixins:[O.a],data:function(){return{formData:{dst_level:null,op_type:null,comment:null,modify_users:[],auth_user_file:null},formErr:null,level:null}},computed:Object(m.b)({game_id:function(t){return t.game_id},admin_level:function(){return Object(w.a)("admin_level")||this.level}}),mounted:function(){"object"===g()(this.admin_level)&&this.query_admin_auth()},methods:{checkForm:function(){var t=this;null===this.formData.dst_level?(this.formErr="权限级别",this.$onlyTxtPopShow("'提交失败 – 请填写“"+this.formErr+"”内容，填写后再提交'")):null===this.formData.op_type?(this.formErr="授权/取消",this.$onlyTxtPopShow("'提交失败 – 请填写“"+this.formErr+"”内容，填写后再提交'")):null===this.formData.comment?(this.formErr="授权描述",this.$onlyTxtPopShow("'提交失败 – 请填写“"+this.formErr+"”内容，填写后再提交'")):0===this.formData.modify_users.length&&null===this.formData.auth_user_file?(this.formErr="输入名单/上传名单",this.$onlyTxtPopShow("'提交失败 – 请填写“"+this.formErr+"”内容，填写后再提交'")):Object(d.g)(this.candleParams().params,this.candleParams().config).then(function(e){var r="",n=0===Number(t.formData.dst_level)?"管理权限":"审判权限",o=1===Number(t.formData.op_type)?"授权":"取消";0===e.ret?(r=1===Number(t.formData.op_type)?o+"成功 – “"+n+"”"+o+"成功，请知会被授权人确认；":"取消成功 – ”"+n+"“取消成功；",t.formReset()):e.ret===t.$code.NOAUTHORITY.num?r=t.$code.NOAUTHORITY.txt:e.ret===t.$code.INCORRECTFORMAT.num?r=t.$code.INCORRECTFORMAT.txt:e.ret===t.$code.REPETEOPERATION.num?r=t.$code.REPETEOPERATION.txt:e.ret===t.$code.LOGINTIMEOUT?t.$loginOut():r=o+"失败 – ”"+n+"“"+o+"失败，请重新尝试；",t.$onlyTxtPopShow(r)})},candleParams:function(){var t={game_id:this.game_id,src_type:0,op_type:this.formData.op_type,modify_users:this.formData.modify_users,dst_level:this.formData.dst_level,comment:this.formData.comment};if(this.formData.modify_users.length>0){t.modify_users=this.formData.modify_users.split(/[\s\n]/),t.modify_users=y()(t.modify_users)}else t.modify_users=y()([]);var e=null,r=null;if(null!==this.formData.auth_user_file){var n=new FormData;n.append("auth_user_file",this.formData.auth_user_file),n.append("op_type",this.formData.op_type),n.append("modify_users",this.formData.modify_users),n.append("dst_level",this.formData.dst_level),n.append("comment",this.formData.comment),n.append("game_id",this.game_id),n.append("src_type",0),r=n,e={headers:{"Content-Type":"multipart/form-data"}}}else r=t,r=D.a.stringify(r),e={headers:{"Content-Type":"application/x-www-form-urlencoded"}};return{config:e,params:r}},getFile:function(t){this.formData.auth_user_file=t.target.files[0]},formReset:function(){this.formData={dst_level:null,op_type:null,comment:null,modify_users:[],auth_user_file:null},this.$refs.myForm.reset()}}},S={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"set-box"},[r("form",{ref:"myForm",attrs:{enctype:"multipart/form-data",name:"fileinfo",id:"myForm"}},[r("div",{staticClass:"power-level widths"},[r("span",[t._v("权限级别")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.dst_level,expression:"formData.dst_level"}],attrs:{name:"dst_level",id:"selectLevel"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.formData,"dst_level",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"null",disabled:"",selected:"",hidden:""}},[t._v("请选择权限级别")]),t._v(" "),1===Number(t.admin_level)?r("option",{attrs:{value:"0"}},[t._v("普通管理者")]):t._e(),t._v(" "),r("option",{attrs:{value:"1"}},[t._v("A级")]),t._v(" "),r("option",{attrs:{value:"2"}},[t._v("B级")]),t._v(" "),r("option",{attrs:{value:"3"}},[t._v("C级")])])]),t._v(" "),r("div",{staticClass:"power-state widths"},[r("span",[t._v("权限操作状态")]),t._v(" "),r("select",{directives:[{name:"model",rawName:"v-model",value:t.formData.op_type,expression:"formData.op_type"}],attrs:{name:"op_type",id:"selectState"},on:{change:function(e){var r=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.formData,"op_type",e.target.multiple?r:r[0])}}},[r("option",{attrs:{value:"null",disabled:"",selected:"",hidden:""}},[t._v("请选择授权/取消")]),t._v(" "),1===Number(t.admin_level)?r("option",{attrs:{value:"1"}},[t._v("授予权限")]):t._e(),t._v(" "),r("option",{attrs:{value:"2"}},[t._v("取消权限")])])]),t._v(" "),r("div",{staticClass:"roll widths"},[r("span",[t._v("名单")]),t._v(" "),r("div",{staticClass:"roll-font"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.modify_users,expression:"formData.modify_users"}],staticClass:"clearfix",attrs:{value:"",name:"modify_users",id:"roll",placeholder:"名单类型：QQ号或微信号\n请输入名单，每行仅限一个QQ账号\n或者微信账号，请以空格键隔开"},domProps:{value:t.formData.modify_users},on:{input:function(e){e.target.composing||t.$set(t.formData,"modify_users",e.target.value)}}}),t._v(" "),r("div",{staticClass:"roll-list"},[r("input",{attrs:{type:"file"},on:{change:function(e){t.getFile(e)}}})]),t._v(" "),t._m(0)])]),t._v(" "),r("div",{staticClass:"desc widths"},[r("span",[t._v("授权描述")]),t._v(" "),r("div",{staticClass:"roll-font"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formData.comment,expression:"formData.comment"}],staticClass:"clearfix",attrs:{value:"",name:"comment"},domProps:{value:t.formData.comment},on:{input:function(e){e.target.composing||t.$set(t.formData,"comment",e.target.value)}}}),t._v(" "),r("button",{staticClass:"btn-submit",attrs:{type:"button"},on:{click:function(e){t.checkForm()}}},[t._v("提交处理")])])])]),t._v(" "),r("my-dialog")],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"roll-model"},[e("div",[this._v("名单文件模板下载：\n            "),e("a",{attrs:{download:"user_template.txt",href:"/static/report_judge/admin/static/user_template.txt"}},[this._v("\n              管理平台授权模板\n            ")])])])}]};var P=r("VU/8")(T,S,!1,function(t){r("U2G7")},"data-v-4ce1568a",null).exports,$={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"switch-box"},[r("a",{staticClass:"btn-history ",class:{on:"permission-record"==t.activeTab},attrs:{href:"javascript:;"},on:{click:function(e){t.$emit("tab-click","permission-record")}}},[t._v("权限操作记录")]),t._v(" "),r("a",{staticClass:"btn-set",class:{on:"permission-settings"==t.activeTab},attrs:{href:"javascript:;"},on:{click:function(e){t.$emit("tab-click","permission-settings")}}},[t._v("权限设置")])])},staticRenderFns:[]};var j=r("VU/8")({name:"PermissionSwitchBox",props:["activeTab"]},$,!1,function(t){r("D+qV")},"data-v-1ab28948",null).exports,N={name:"PermissionManage",components:{MyHeader:r("U0O9").a,PermissionSwitchBox:j,PermissionSettings:P,PermissionRecord:_},data:function(){return{active_tab:"permission-record"}},methods:{swichTab:function(t){this.active_tab=t}}},C={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("my-header"),this._v(" "),e("div",{staticClass:"manage-switch"},[e("permission-switch-box",{attrs:{"active-tab":this.active_tab},on:{"tab-click":this.swichTab}}),this._v(" "),e("div",{staticClass:"switch-content"},[e(this.active_tab,{tag:"component"})],1)],1)],1)},staticRenderFns:[]};var M=r("VU/8")(N,C,!1,function(t){r("EDno")},"data-v-bbdd2bb4",null);e.default=M.exports},Xc4G:function(t,e,r){var n=r("lktj"),o=r("1kS7"),i=r("NpIQ");t.exports=function(t){var e=n(t),r=o.f;if(r)for(var a,s=r(t),u=i.f,l=0;s.length>l;)u.call(t,a=s[l++])&&e.push(a);return e}},Xd32:function(t,e,r){r("+tPU"),r("zQR9"),t.exports=r("5PlU")},Zzip:function(t,e,r){t.exports={default:r("/n6Q"),__esModule:!0}},crlp:function(t,e,r){var n=r("7KvD"),o=r("FeBl"),i=r("O4g8"),a=r("Kh4W"),s=r("evD5").f;t.exports=function(t){var e=o.Symbol||(o.Symbol=i?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},d7EF:function(t,e,r){"use strict";e.__esModule=!0;var n=i(r("us/S")),o=i(r("BO1k"));function i(t){return t&&t.__esModule?t:{default:t}}e.default=function(){return function(t,e){if(Array.isArray(t))return t;if((0,n.default)(Object(t)))return function(t,e){var r=[],n=!0,i=!1,a=void 0;try{for(var s,u=(0,o.default)(t);!(n=(s=u.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){i=!0,a=t}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},fWfb:function(t,e,r){"use strict";var n=r("7KvD"),o=r("D2L2"),i=r("+E39"),a=r("kM2E"),s=r("880/"),u=r("06OY").KEY,l=r("S82l"),c=r("e8AB"),f=r("e6n0"),d=r("3Eo+"),m=r("dSzd"),p=r("Kh4W"),v=r("crlp"),_=r("Xc4G"),h=r("7UMu"),y=r("77Pl"),b=r("EqjI"),g=r("TcQ7"),O=r("MmMw"),x=r("X8DO"),w=r("Yobk"),E=r("Rrel"),D=r("LKZe"),T=r("evD5"),S=r("lktj"),P=D.f,$=T.f,j=E.f,N=n.Symbol,C=n.JSON,M=C&&C.stringify,R=m("_hidden"),F=m("toPrimitive"),I={}.propertyIsEnumerable,k=c("symbol-registry"),Q=c("symbols"),U=c("op-symbols"),A=Object.prototype,B="function"==typeof N,Y=n.QObject,W=!Y||!Y.prototype||!Y.prototype.findChild,q=i&&l(function(){return 7!=w($({},"a",{get:function(){return $(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=P(A,e);n&&delete A[e],$(t,e,r),n&&t!==A&&$(A,e,n)}:$,z=function(t){var e=Q[t]=w(N.prototype);return e._k=t,e},K=B&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},J=function(t,e,r){return t===A&&J(U,e,r),y(t),e=O(e,!0),y(r),o(Q,e)?(r.enumerable?(o(t,R)&&t[R][e]&&(t[R][e]=!1),r=w(r,{enumerable:x(0,!1)})):(o(t,R)||$(t,R,x(1,{})),t[R][e]=!0),q(t,e,r)):$(t,e,r)},L=function(t,e){y(t);for(var r,n=_(e=g(e)),o=0,i=n.length;i>o;)J(t,r=n[o++],e[r]);return t},G=function(t){var e=I.call(this,t=O(t,!0));return!(this===A&&o(Q,t)&&!o(U,t))&&(!(e||!o(this,t)||!o(Q,t)||o(this,R)&&this[R][t])||e)},V=function(t,e){if(t=g(t),e=O(e,!0),t!==A||!o(Q,e)||o(U,e)){var r=P(t,e);return!r||!o(Q,e)||o(t,R)&&t[R][e]||(r.enumerable=!0),r}},X=function(t){for(var e,r=j(g(t)),n=[],i=0;r.length>i;)o(Q,e=r[i++])||e==R||e==u||n.push(e);return n},H=function(t){for(var e,r=t===A,n=j(r?U:g(t)),i=[],a=0;n.length>a;)!o(Q,e=n[a++])||r&&!o(A,e)||i.push(Q[e]);return i};B||(s((N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(r){this===A&&e.call(U,r),o(this,R)&&o(this[R],t)&&(this[R][t]=!1),q(this,t,x(1,r))};return i&&W&&q(A,t,{configurable:!0,set:e}),z(t)}).prototype,"toString",function(){return this._k}),D.f=V,T.f=J,r("n0T6").f=E.f=X,r("NpIQ").f=G,r("1kS7").f=H,i&&!r("O4g8")&&s(A,"propertyIsEnumerable",G,!0),p.f=function(t){return z(m(t))}),a(a.G+a.W+a.F*!B,{Symbol:N});for(var Z="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;Z.length>tt;)m(Z[tt++]);for(var et=S(m.store),rt=0;et.length>rt;)v(et[rt++]);a(a.S+a.F*!B,"Symbol",{for:function(t){return o(k,t+="")?k[t]:k[t]=N(t)},keyFor:function(t){if(!K(t))throw TypeError(t+" is not a symbol!");for(var e in k)if(k[e]===t)return e},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!B,"Object",{create:function(t,e){return void 0===e?w(t):L(w(t),e)},defineProperty:J,defineProperties:L,getOwnPropertyDescriptor:V,getOwnPropertyNames:X,getOwnPropertySymbols:H}),C&&a(a.S+a.F*(!B||l(function(){var t=N();return"[null]"!=M([t])||"{}"!=M({a:t})||"{}"!=M(Object(t))})),"JSON",{stringify:function(t){for(var e,r,n=[t],o=1;arguments.length>o;)n.push(arguments[o++]);if(r=e=n[1],(b(e)||void 0!==t)&&!K(t))return h(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!K(e))return e}),n[1]=e,M.apply(C,n)}}),N.prototype[F]||r("hJx8")(N.prototype,F,N.prototype.valueOf),f(N,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},fxRn:function(t,e,r){r("+tPU"),r("zQR9"),t.exports=r("g8Ux")},g8Ux:function(t,e,r){var n=r("77Pl"),o=r("3fs2");t.exports=r("FeBl").getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},gSvA:function(t,e,r){var n=r("kM2E"),o=r("mbce")(!0);n(n.S,"Object",{entries:function(t){return o(t)}})},iJHC:function(t,e,r){"use strict";var n=r("qk/J"),o=r("22O3");e.a={methods:{query_admin_auth:function(){var t=this,e={game_id:this.game_id,src_type:0};Object(n.b)(e).then(function(e){0===e.ret?e.data.level>=0?(Object(o.b)("admin_level",e.data.level),"LoginPage"===t.$route.name?top.location.href="/static/report_judge/admin/index.html#/?version=1":"PermissionManage"===t.$route.name&&(t.level=e.data.level)):(t.$loginOut(),t.$onlyTxtPopShow(t.$errTxt.noAuth),top.location.href="/static/report_judge/admin/index.html#/login?version=2"):e.ret===t.$code.LOGINTIMEOUT?t.$loginOut():t.$onlyTxtPopShow(t.$errTxt.networkErr)})}}}},mbce:function(t,e,r){var n=r("lktj"),o=r("TcQ7"),i=r("NpIQ").f;t.exports=function(t){return function(e){for(var r,a=o(e),s=n(a),u=s.length,l=0,c=[];u>l;)i.call(a,r=s[l++])&&c.push(t?[r,a[r]]:a[r]);return c}}},n0T6:function(t,e,r){var n=r("Ibhu"),o=r("xnc9").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},pFYg:function(t,e,r){"use strict";e.__esModule=!0;var n=a(r("Zzip")),o=a(r("5QVw")),i="function"==typeof o.default&&"symbol"==typeof n.default?function(t){return typeof t}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":typeof t};function a(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof o.default&&"symbol"===i(n.default)?function(t){return void 0===t?"undefined":i(t)}:function(t){return t&&"function"==typeof o.default&&t.constructor===o.default&&t!==o.default.prototype?"symbol":void 0===t?"undefined":i(t)}},"us/S":function(t,e,r){t.exports={default:r("Xd32"),__esModule:!0}},wEtr:function(t,e,r){r("gSvA"),t.exports=r("FeBl").Object.entries}});
//# sourceMappingURL=1.420a90db9fdfaec111db.js.map